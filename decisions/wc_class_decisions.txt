#####################################
#		Training (without mentor)	#
#####################################
decisions = {
	### Mage ###
	teach_yourself_mage = {
		is_high_prio = yes

		ai_check_interval = 60

		ai = no
		only_playable = yes

		potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			# Main potential
			potential_mage_trigger = yes
		}
		allow = {
			show_only_failed_conditions = yes
			
			is_inaccessible_trigger = no

			OR = {
				AND = {
					is_ruler = yes
					wealth = 25
				}
				is_ruler = no
			}
		}
		effect = {
			if = {
				limit = { ai = no }
				wealth = -25
			}
			character_event = { id = WCCLS.1 }
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0.05

			modifier = {
				factor = 10

				OR = {
					true_religion = cult_of_sunwell
					true_religion = arcane_religion
				}
			}
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 2
				trait = brave
			}
		}
	}

	### Hunter ###
	teach_yourself_hunter = {
		is_high_prio = yes

		ai_check_interval = 60

		ai = no
		only_playable = yes

		potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			# Religion and culture potential

			potential_hunter_trigger = yes
		}
		allow = {
			show_only_failed_conditions = yes
			
			is_inaccessible_trigger = no

			OR = {
				AND = {
					is_ruler = yes
					wealth = 25
				}
				is_ruler = no
			}
		}
		effect = {
			if = {
				limit = { ai = no }
				wealth = -25
			}
			character_event = { id = WCCLS.101 }
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0.05

			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 2
				trait = brave
			}
		}
	}

	### Warrior ###
	teach_yourself_warrior = {
		is_high_prio = yes

		ai_check_interval = 60

		ai = no
		only_playable = yes

		potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			potential_warrior_trigger = yes
		}
		allow = {
			show_only_failed_conditions = yes
			
			is_inaccessible_trigger = no

			OR = {
				AND = {
					is_ruler = yes
					wealth = 25
				}
				is_ruler = no
			}
		}
		effect = {
			if = {
				limit = { ai = no }
				wealth = -25
			}
			character_event = { id = WCCLS.201 }
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0.05

			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 2
				trait = brave
			}
		}
	}

	### Paladin ###
	teach_yourself_paladin = {
		is_high_prio = yes

		ai_check_interval = 60

		ai = no
		only_playable = yes

		potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			potential_paladin_trigger = yes
		}
		allow = {
			show_only_failed_conditions = yes
			
			is_inaccessible_trigger = no

			OR = {
				AND = {
					is_ruler = yes
					wealth = 25
				}
				is_ruler = no
			}
		}
		effect = {
			if = {
				limit = { ai = no }
				wealth = -25
			}
			character_event = { id = WCCLS.301 }
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0.05

			modifier = {
				factor = 10

				true_religion_group = light_group
				OR = {
					has_benevolent_trait_trigger = yes
					has_pious_trait_trigger = yes
				}
			}
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 2
				trait = brave
			}
		}
	}

	### Priest ###   # Remember to edit become_priestess_of_elune when changing something
	teach_yourself_priest = {
		is_high_prio = yes

		ai_check_interval = 60

		ai = no
		only_playable = yes

		potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no
			potential_priest_trigger = yes

			NOT = { religion = kaldorei_religion }
		}
		allow = {
			show_only_failed_conditions = yes
			
			is_inaccessible_trigger = no

			OR = {
				AND = {
					is_ruler = yes
					wealth = 25
				}
				is_ruler = no
			}
		}
		effect = {
			if = {
				limit = { ai = no }
				wealth = -25
			}
			character_event = { id = WCCLS.401 }
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0.05

			modifier = {
				factor = 10

				light_true_religion_trigger = yes
				OR = {
					has_benevolent_trait_trigger = yes
					has_pious_trait_trigger = yes
				}
			}
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 2
				trait = brave
			}
		}
	}
	### Priestess of the Moon###
	become_priestess_of_elune = {
		is_high_prio = yes

		ai_check_interval = 60

		ai = no
		only_playable = yes

		potential = {
			is_untouchable_trigger = no

			#Priest potential
			is_adult = yes
			is_incapable = no
			prisoner = no
			potential_priest_trigger = yes

			#Priestess of the Moon potential
			is_in_society = no
			religion = kaldorei_religion
			is_female = yes
		}
		allow = {
			show_only_failed_conditions = yes
			
			is_inaccessible_trigger = no

			OR = {
				AND = {
					is_ruler = yes
					wealth = 25
				}
				is_ruler = no
			}
		}
		effect = {
			if = {
				limit = { ai = no }
				wealth = -25
			}
			character_event = { id = WCCLS.401 }
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0.05

			modifier = {
				factor = 10

				OR = {
					true_religion = kaldorei_religion
				}
				OR = {
					has_benevolent_trait_trigger = yes
					has_pious_trait_trigger = yes
				}
			}
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 2
				trait = brave
			}
		}
	}

	### Rogue ###
	teach_yourself_rogue = {
		is_high_prio = yes

		ai_check_interval = 60

		ai = no
		only_playable = yes

		potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			potential_rogue_trigger = yes
		}
		allow = {
			show_only_failed_conditions = yes
			
			is_inaccessible_trigger = no

			OR = {
				AND = {
					is_ruler = yes
					wealth = 25
				}
				is_ruler = no
			}
		}
		effect = {
			if = {
				limit = { ai = no }
				wealth = -25
			}
			character_event = { id = WCCLS.501 }
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0.05

			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 2
				trait = brave
			}
		}
	}

	### Warlock ###
	teach_yourself_warlock = {
		is_high_prio = yes

		ai_check_interval = 60

		ai = no
		only_playable = yes

		potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			potential_warlock_trigger = yes
		}
		allow = {
			show_only_failed_conditions = yes
			
			is_inaccessible_trigger = no

			OR = {
				AND = {
					is_ruler = yes
					wealth = 25
				}
				is_ruler = no
			}
		}
		effect = {
			if = {
				limit = { ai = no }
				wealth = -25
			}
			character_event = { id = WCCLS.601 }
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0.05

			modifier = {
				factor = 10

				OR = {
					true_religion_group = fel_group
					AND = {
						has_impious_trait_trigger = yes
						OR = {
							has_evil_trait_trigger = yes
							has_unpleasant_trait_trigger = yes
						}
					}
				}
			}
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 2
				trait = brave
			}
		}
	}

	### Shaman ###
	teach_yourself_shaman = {
		is_high_prio = yes

		ai_check_interval = 60

		ai = no
		only_playable = yes

		potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			potential_shaman_trigger = yes
		}
		allow = {
			show_only_failed_conditions = yes
			
			is_inaccessible_trigger = no

			OR = {
				AND = {
					is_ruler = yes
					wealth = 25
				}
				is_ruler = no
			}
		}
		effect = {
			if = {
				limit = { ai = no }
				wealth = -25
			}
			character_event = { id = WCCLS.701 }
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0.05

			modifier = {
				factor = 10

				shamanic_true_religion_trigger = yes
				OR = {
					has_benevolent_trait_trigger = yes
					has_pious_trait_trigger = yes
				}
			}
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 2
				trait = brave
			}
		}
	}

	### Druid ###
	teach_yourself_druid = {
		is_high_prio = yes

		ai_check_interval = 60

		ai = no
		only_playable = yes

		potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			potential_druid_trigger = yes
		}
		allow = {
			show_only_failed_conditions = yes
			
			is_inaccessible_trigger = no

			OR = {
				AND = {
					is_ruler = yes
					wealth = 25
				}
				is_ruler = no
			}
		}
		effect = {
			if = {
				limit = { ai = no }
				wealth = -25
			}
			character_event = { id = WCCLS.801 }
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0.05

			modifier = {
				factor = 10

				true_religion_group = druidism_group
				OR = {
					has_benevolent_trait_trigger = yes
					has_pious_trait_trigger = yes
				}
			}
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 2
				trait = brave
			}
		}
	}

	### Loa Priest ###
	teach_yourself_loa_priest = {
		is_high_prio = yes

		ai_check_interval = 60

		ai = no
		only_playable = yes

		potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			potential_loa_priest_trigger = yes
		}
		allow = {
			show_only_failed_conditions = yes
			
			is_inaccessible_trigger = no

			OR = {
				AND = {
					is_ruler = yes
					wealth = 25
				}
				is_ruler = no
			}
		}
		effect = {
			if = {
				limit = { ai = no }
				wealth = -25
			}
			character_event = { id = WCCLS.901 }
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0.05

			modifier = {
				factor = 10

				true_religion_group = loa_group
			}
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 2
				trait = brave
			}
		}
	}

	### Necromancer ###
	teach_yourself_necromancer = {
		is_high_prio = yes

		ai_check_interval = 60

		ai = no
		only_playable = yes

		potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			potential_necromancer_trigger = yes
		}
		allow = {
			show_only_failed_conditions = yes
			
			is_inaccessible_trigger = no

			OR = {
				AND = {
					is_ruler = yes
					wealth = 25
				}
				is_ruler = no
			}
		}
		effect = {
			if = {
				limit = { ai = no }
				wealth = -25
			}
			narrative_event = { id = WCCLS.1101 }
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0.05

			modifier = {
				factor = 10

				OR = {
					true_religion_group = necromancy_group
					AND = {
						has_impious_trait_trigger = yes
						OR = {
							has_evil_trait_trigger = yes
							has_unpleasant_trait_trigger = yes
						}
					}
				}
			}
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 2
				trait = brave
			}
		}
	}

	### Shadow Priest ###
	teach_yourself_shadow_priest = {
		is_high_prio = yes

		ai_check_interval = 60

		ai = no
		only_playable = yes

		potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			potential_shadow_priest_trigger = yes
		}
		allow = {
			show_only_failed_conditions = yes
			
			is_inaccessible_trigger = no

			OR = {
				AND = {
					is_ruler = yes
					wealth = 25
				}
				is_ruler = no
			}
		}
		effect = {
			if = {
				limit = { ai = no }
				wealth = -25
			}
			character_event = { id = WCCLS.1201 }
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0.05

			modifier = {
				factor = 10

				OR = {
					true_religion_group = void_group
					true_religion = forsaken_cult
					AND = {
						has_impious_trait_trigger = yes
						OR = {
							has_evil_trait_trigger = yes
							has_unpleasant_trait_trigger = yes
						}
					}
				}
			}
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 2
				trait = brave
			}
		}
	}


	###  Druid Forms ###
	learn_cat_form = {
		is_high_prio = yes

		ai_check_interval = 12

		ai = no
		only_playable = yes

		potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			can_learn_cat_bear_form_trigger = yes
			NOR = {
				cat_form_trigger = yes
				master_cat_form_trigger = yes
			}
		}
		allow = {
			show_only_failed_conditions = yes
			
			is_incapable = no
			prisoner = no
			is_inaccessible_trigger = no
			custom_tooltip = {
				text = is_not_busy_trigger_tooltip
				hidden_tooltip = { NOT = { has_character_flag = do_not_disturb } }
			}

		}
		effect = {
			character_event = { id = WCCLS.10000 }
			set_character_flag = do_not_disturb
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0.8
		}
	}
	learn_bear_form = {
		is_high_prio = yes

		ai_check_interval = 12

		ai = no
		only_playable = yes

		potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			can_learn_cat_bear_form_trigger = yes
			NOR = {
				bear_form_trigger = yes
				master_bear_form_trigger = yes
			}
		}
		allow = {
			show_only_failed_conditions = yes
			
			is_incapable = no
			prisoner = no
			is_inaccessible_trigger = no
			custom_tooltip = {
				text = is_not_busy_trigger_tooltip
				hidden_tooltip = { NOT = { has_character_flag = do_not_disturb } }
			}

		}
		effect = {
			character_event = { id = WCCLS.10020 }
			set_character_flag = do_not_disturb
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0.8
		}
	}
	learn_talon_form = {
		is_high_prio = yes

		ai_check_interval = 12

		ai = no
		only_playable = yes

		potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			can_learn_talon_form_trigger = yes
			NOR = {
				talon_form_trigger = yes
				master_talon_form_trigger = yes
			}
		}
		allow = {
			show_only_failed_conditions = yes
			
			is_incapable = no
			prisoner = no
			is_inaccessible_trigger = no
			custom_tooltip = {
				text = is_not_busy_trigger_tooltip
				hidden_tooltip = { NOT = { has_character_flag = do_not_disturb } }
			}

		}
		effect = {
			character_event = { id = WCCLS.10040 }
			set_character_flag = do_not_disturb
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0.8
		}
	}
	learn_stag_form = {
		is_high_prio = yes

		ai_check_interval = 12

		ai = no
		only_playable = yes

		potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			can_learn_stag_form_trigger = yes
			NOT = {
				stag_form_trigger = yes
			}
		}
		allow = {
			show_only_failed_conditions = yes
			
			is_incapable = no
			prisoner = no
			is_inaccessible_trigger = no
			custom_tooltip = {
				text = is_not_busy_trigger_tooltip
				hidden_tooltip = { NOT = { has_character_flag = do_not_disturb } }
			}

		}
		effect = {
			character_event = { id = WCCLS.10060 }
			set_character_flag = do_not_disturb
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0.8
		}
	}
	learn_master_cat_form = {
		is_high_prio = yes

		ai_check_interval = 12

		ai = no
		only_playable = yes

		potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			cat_form_trigger = yes
			can_master_cat_form_trigger = yes
			NOT = {
				master_cat_form_trigger = yes
			}
		}
		allow = {
			show_only_failed_conditions = yes
			
			is_incapable = no
			prisoner = no
			is_inaccessible_trigger = no
			custom_tooltip = {
				text = is_not_busy_trigger_tooltip
				hidden_tooltip = { NOT = { has_character_flag = do_not_disturb } }
			}

		}
		effect = {
			character_event = { id = WCCLS.10100 }
			set_character_flag = do_not_disturb
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0.8
		}
	}
	learn_master_bear_form = {
		is_high_prio = yes

		ai_check_interval = 12

		ai = no
		only_playable = yes

		potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			bear_form_trigger = yes
			can_master_bear_form_trigger = yes
			NOT = {
				master_bear_form_trigger = yes
			}
		}
		allow = {
			show_only_failed_conditions = yes
			
			is_incapable = no
			prisoner = no
			is_inaccessible_trigger = no
			custom_tooltip = {
				text = is_not_busy_trigger_tooltip
				hidden_tooltip = { NOT = { has_character_flag = do_not_disturb } }
			}

		}
		effect = {
			character_event = { id = WCCLS.10120 }
			set_character_flag = do_not_disturb
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0.8
		}
	}
	learn_master_talon_form = {
		is_high_prio = yes

		ai_check_interval = 12

		ai = no
		only_playable = yes

		potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			talon_form_trigger = yes
			can_master_talon_form_trigger = yes
			NOT = {
				master_talon_form_trigger = yes
			}
		}
		allow = {
			show_only_failed_conditions = yes
			
			is_incapable = no
			prisoner = no
			is_inaccessible_trigger = no
			custom_tooltip = {
				text = is_not_busy_trigger_tooltip
				hidden_tooltip = { NOT = { has_character_flag = do_not_disturb } }
			}

		}
		effect = {
			character_event = { id = WCCLS.10140 }
			set_character_flag = do_not_disturb
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0.8
		}
	}
}

#################################################
#			Training (mentor)					#
#################################################
targetted_decisions = {
	ask_to_be_your_mentor = {
		ai_target_filter = realm
		ai_check_interval = 24

		ai = no
		only_playable = yes

		from_potential = {
			is_adult = yes

			ask_to_be_your_mentor_decision_from_potential = yes
		}
		potential = {
			ask_to_be_your_mentor_decision_potential = yes
		}
		allow = {
			show_only_failed_conditions = yes
			
			ask_to_be_your_mentor_decision_allowed = yes
		}
		effect = {
			ROOT = {
				save_event_target_as = mentor
			}
			FROM = {
				save_event_target_as = student
				opinion = { modifier = opinion_teaching_me who = ROOT }
				set_character_flag = sent_letter_to_mentor
				character_event = { id = WCCLS.1500 }
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0.1

			# Want to be a...
			# Mage
			modifier = {
				factor = 10

				FROM = { potential_mage_trigger = yes }
				potential_mentor_mage_trigger = yes

				OR = {
					true_religion = cult_of_sunwell
					true_religion = arcane_religion
				}
			}
			# Paladin
			modifier = {
				factor = 10

				FROM = { potential_paladin_trigger = yes }
				potential_mentor_paladin_trigger = yes

				true_religion_group = light_group
				OR = {
					has_benevolent_trait_trigger = yes
					has_pious_trait_trigger = yes
				}
			}
			# Priest
			modifier = {
				factor = 10

				FROM = { potential_priest_trigger = yes }
				potential_mentor_priest_trigger = yes

				light_true_religion_trigger = yes
				OR = {
					has_benevolent_trait_trigger = yes
					has_pious_trait_trigger = yes
				}
			}
			# Warlock
			modifier = {
				factor = 10

				FROM = { potential_warlock_trigger = yes }
				potential_mentor_warlock_trigger = yes

				OR = {
					true_religion_group = fel_group
					AND = {
						has_impious_trait_trigger = yes
						OR = {
							has_evil_trait_trigger = yes
							has_unpleasant_trait_trigger = yes
						}
					}
				}
			}
			# Shaman
			modifier = {
				factor = 10

				FROM = { potential_shaman_trigger = yes }
				potential_mentor_shaman_trigger = yes

				shamanic_true_religion_trigger = yes
				OR = {
					has_benevolent_trait_trigger = yes
					has_pious_trait_trigger = yes
				}
			}
			# Druid
			modifier = {
				factor = 10

				FROM = { potential_druid_trigger = yes }
				potential_mentor_druid_trigger = yes

				true_religion_group = druidism_group
				OR = {
					has_benevolent_trait_trigger = yes
					has_pious_trait_trigger = yes
				}
			}
			# Loa Priest
			modifier = {
				factor = 10

				FROM = { potential_loa_priest_trigger = yes }
				potential_mentor_loa_priest_trigger = yes

				true_religion_group = loa_group
			}
			# Death Knight
			modifier = {
				factor = 10

				FROM = { potential_death_knight_trigger = yes }
				potential_mentor_death_knight_trigger = yes

				true_religion_group = necromancy_group
			}
			# Necromancer
			modifier = {
				factor = 10

				FROM = { potential_necromancer_trigger = yes }
				potential_mentor_necromancer_trigger = yes

				OR = {
					true_religion_group = necromancy_group
					AND = {
						has_impious_trait_trigger = yes
						OR = {
							has_evil_trait_trigger = yes
							has_unpleasant_trait_trigger = yes
						}
					}
				}
			}
			# Shadow Priest
			modifier = {
				factor = 10

				FROM = { potential_shadow_priest_trigger = yes }
				potential_mentor_shadow_priest_trigger = yes

				OR = {
					true_religion_group = void_group
					true_religion = forsaken_cult
					AND = {
						has_impious_trait_trigger = yes
						OR = {
							has_evil_trait_trigger = yes
							has_unpleasant_trait_trigger = yes
						}
					}
				}
			}
			modifier = {
				factor = 2

				trait = ambitious
			}
			modifier = {
				factor = 2

				trait = brave
			}
		}
	}
}


#################################
# 			Abilities			#
#################################
decisions = {
	### Mage ###
	# Gives random bonus or chance to study dark magic
	study_magical_secrets = {
		ai_check_interval = 36

		only_playable = yes

		potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			is_mage_class_trigger = yes
		}

		allow = {
			show_only_failed_conditions = yes
			
			is_inaccessible_trigger = no

			custom_tooltip = {
				text = is_not_busy_trigger_tooltip
				hidden_tooltip = { NOT = { has_character_flag = do_not_disturb } }
			}
			custom_tooltip = {
				text = has_not_used_decision_3_years_tooltip
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = study_magical_secrets_cooldown_flag }
						had_character_flag = { flag = study_magical_secrets_cooldown_flag years = 3 }
					}
				}
			}
		}

		effect = {
			set_character_flag = do_not_disturb
			set_character_flag = study_magical_secrets_cooldown_flag

			hidden_effect = { character_event = { id = WCCLS.15 } }
		}

		revoke_allowed = {
			always = no
		}

		ai_will_do = {
			factor = 0.25
		}
	}

	### Hunter ###

	### Warrior ###

	### Paladin ###
	write_libram = {
		is_high_prio = yes

		ai_check_interval = 120

		only_playable = yes

		potential = {
			is_adult = yes
			is_paladin_class_trigger = yes
			NOT = { is_weak_paladin_class_trigger = yes }
			NOT = { has_character_flag = wrote_libram }
			can_write_libram = yes
		}
		allow = {
			show_only_failed_conditions = yes
			
			custom_tooltip = {
				text = is_not_busy_trigger_tooltip
				hidden_tooltip = { NOT = { has_character_flag = do_not_disturb } }
			}
			piety = 500
		}
		effect = {
			piety = -500
			character_event = { id = WCCLS.10200 }
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0.8

			modifier = {
				factor = 0
				war = yes
			}
		}
	}

	### Priest ###

	### Rogue ###

	### Warlock ###

	### Shaman ###

	### Druid ###
	cat_form_druid = {
		ai_check_interval = 12

		only_playable = yes

		potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			OR = {
				cat_form_trigger = yes
				master_cat_form_trigger = yes
			}
			NOR = {
				trait = cat_form
				trait = master_cat_form
			}
			prefers_cat_form_trigger = yes
		}
		allow = {
			show_only_failed_conditions = yes
			
			is_incapable = no
			prisoner = no
			is_inaccessible_trigger = no
		}
		effect = {
			shapeshift_cat_effect = yes
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1

			modifier = {
				factor = 0
				in_command = no
			}
		}
	}
	bear_form_druid = {
		ai_check_interval = 12

		only_playable = yes

		potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			OR = {
				bear_form_trigger = yes
				master_bear_form_trigger = yes
			}
			NOR = {
				trait = bear_form
				trait = master_bear_form
			}
			prefers_bear_form_trigger = yes
		}
		allow = {
			show_only_failed_conditions = yes
			
			is_incapable = no
			prisoner = no
			is_inaccessible_trigger = no
		}
		effect = {
			shapeshift_bear_effect = yes
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1

			modifier = {
				factor = 0
				in_command = no
			}
		}
	}
	talon_form_druid = {
		ai_check_interval = 12

		only_playable = yes

		potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			OR = {
				talon_form_trigger = yes
				master_talon_form_trigger = yes
			}
			NOR = {
				trait = talon_form
				trait = master_talon_form
			}
			prefers_talon_form_trigger = yes
		}
		allow = {
			show_only_failed_conditions = yes
			
			is_incapable = no
			prisoner = no
			is_inaccessible_trigger = no
		}
		effect = {
			shapeshift_talon_effect = yes
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1

			modifier = {
				factor = 0
				in_command = no
			}
		}
	}
	stag_form_druid = {
		ai_check_interval = 12

		only_playable = yes

		potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			OR = {
				stag_form_trigger = yes
			}
			NOT = {
				trait = stag_form
			}
			prefers_stag_form_trigger = yes
		}
		allow = {
			show_only_failed_conditions = yes
			
			is_incapable = no
			prisoner = no
			is_inaccessible_trigger = no
		}
		effect = {
			shapeshift_stag_effect = yes
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1

			modifier = {
				factor = 0
				in_command = no
			}
		}
	}
	pack_form_druid = {
		ai_check_interval = 12

		only_playable = yes

		potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			OR = {
				pack_form_trigger = yes
			}
			NOT = {
				trait = pack_form
			}
		}
		allow = {
			show_only_failed_conditions = yes
			
			is_incapable = no
			prisoner = no
			is_inaccessible_trigger = no
		}
		effect = {
			shapeshift_pack_effect = yes
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1

			modifier = {
				factor = 0
				in_command = no
			}
		}
	}
	shapeshift_back_druid = {
		is_high_prio = yes
		ai_check_interval = 12

		# only_playable = yes

		potential = {
			is_adult = yes
			OR = {
				is_shapeshifted_trigger = yes
			}
		}
		allow = {
			show_only_failed_conditions = yes
		}
		effect = {
			shapeshift_back_effect = yes
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1

			modifier = {
				factor = 0
				in_command = yes
			}
		}
	}
	enter_emerald_dream_decision = {
		ai_check_interval = 60

		only_playable = yes

		potential = {
			is_adult = yes
			NOT = {
				trait = in_emerald_dream
			}
			is_druid_class_trigger = yes
		}
		allow = {
			show_only_failed_conditions = yes
			
			custom_tooltip = {
				text = is_not_busy_trigger_tooltip
				hidden_tooltip = { NOT = { has_character_flag = do_not_disturb } }
			}
		}
		effect = {
			character_event = { id = WCED.1 }
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0.8

			modifier = {
				factor = 0
				war = yes

			}
			modifier = {
				factor = 0
				NOT = { had_character_flag = { flag = recently_visited_dream years = 5 } }
			}
		}
	}
	leave_emerald_dream = {
		is_high_prio = yes

		ai_check_interval = 60

		only_playable = yes

		potential = {
			is_adult = yes
			trait = in_emerald_dream
			is_druid_class_trigger = yes
		}
		allow = {
			show_only_failed_conditions = yes
			
			custom_tooltip = {
				text = is_not_busy_trigger_tooltip
				hidden_tooltip = { NOT = { has_character_flag = do_not_disturb } }
			}
		}
		effect = {
			character_event = { id = WCED.2 }
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0.8
			modifier = {
				factor = 0
				NOT = { had_character_flag = { flag = in_the_dream years = 5 } }
			}

		}
	}

	### Loa Priest ###

	### Death Knight
	forge_runeblade = {
		is_high_prio = yes

		ai_check_interval = 120

		only_playable = yes

		potential = {
			is_adult = yes
			OR = {
				AND = {
					is_death_knight_class_trigger = yes
					NOT = { is_weak_death_knight_class_trigger = yes }
					NOT = { has_character_flag = forged_runeblade }
				}
				trait = creature_nathrezim
			}
		}
		allow = {
			show_only_failed_conditions = yes
			
			custom_tooltip = {
				text = is_not_busy_trigger_tooltip
				hidden_tooltip = { NOT = { has_character_flag = do_not_disturb } }
			}
			OR = {
				AND = {
					trait = creature_nathrezim
					wealth = 500
				}
				AND = {
					NOT = { trait = creature_nathrezim }
					piety = 500
				}
			}
		}
		effect = {
			if = {
				limit = {
					trait = creature_nathrezim
				}
				wealth = -500
			}
			if = {
				limit = {
					NOT = { trait = creature_nathrezim }
				}
				piety = -500
			}
			character_event = { id = WCCLS.10300 }
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0.8

			modifier = {
				factor = 0
				war = yes

			}
		}
	}

	### Necromancer ###

	### Shadow Priest ###
}
targetted_decisions = {
	### Mage ###
	# Gives 2 year opinion bonus
	conjure_food = {
		filter = self
		ai_target_filter = self
		ai_check_interval = 24

		only_playable = yes

		potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			is_mage_class_trigger = yes
		}

		allow = {
			show_only_failed_conditions = yes
			
			is_inaccessible_trigger = no

			custom_tooltip = {
				text = has_not_used_decision_3_years_tooltip
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = conjure_food_cooldown_flag }
						had_character_flag = { flag = conjure_food_cooldown_flag years = 3 }
					}
				}
			}

			is_5_6_magic_class_trigger = yes
			has_3_mana_trigger = yes
		}

		effect = {
			set_character_flag = conjure_food_cooldown_flag

			tooltip = { remove_3_mana_effect = yes }

			character_event = { id = WCCLS.10 }
		}

		revoke_allowed = { always = no }

		ai_will_do = {
			factor = 0.25
		}
	}
	# Gives +2 to every attribute
	sharp_mind_dec = {
		filter = realm_including_me
		ai_target_filter = court_including_me
		ai_check_interval = 48

		only_playable = yes

		from_potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			is_mage_class_trigger = yes
		}

		potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			NOT = { has_character_modifier = sharp_mind }
		}

		allow = {
			show_only_failed_conditions = yes
			
			is_inaccessible_trigger = no

			custom_tooltip = {
				text = has_not_used_decision_5_years_tooltip
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = sharp_mind_cooldown_flag }
						had_character_flag = { flag = sharp_mind_cooldown_flag years = 5 }
					}
				}
			}
			FROM = {
				is_inaccessible_trigger = no

				has_1_mana_trigger = yes
			}
		}

		effect = {
			set_character_flag = sharp_mind_cooldown_flag

			tooltip = { add_character_modifier = { name = sharp_mind years = 2 } }
			opinion = { modifier = opinion_grateful who = FROM year = 10 }
			hidden_effect = { character_event = { id = WCCLS.40 } }

			FROM = {
				remove_1_mana_effect = yes
			}
		}

		revoke_allowed = { always = no }

		ai_will_do = {
			factor = 0.1
			modifier = {
				factor = 10
				character = FROM
			}
			modifier = {
				factor = 4
				FROM = { is_benevolent_trigger = yes }
			}
			modifier = {
				factor = 2
				reverse_opinion = {
					who = FROM
					value = 30
				}
			}
			modifier = {
				factor = 0
				NOR = {
					is_close_relative = FROM
					is_friend = FROM
					is_lover = FROM
					FROM = {
						has_minor_title = title_court_physician
						de_facto_liege = ROOT
					}
				}
			}
		}
	}

	### Hunter ###

	### Warrior ###

	### Paladin ###
	# Removes wounded and severely_injured traits
	heal_wounds = {
		filter = realm_including_me
		ai_target_filter = court_including_me
		ai_check_interval = 6

		from_potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			OR = {
				is_paladin_class_trigger = yes
				is_priest_class_trigger = yes
				is_shaman_class_trigger = yes
				is_druid_class_trigger = yes
				is_loa_priest_class_trigger = yes
			}
		}

		potential = {
			prisoner = no

			OR = {
				trait = wounded
				trait = severely_injured
			}
		}

		allow = {
			show_only_failed_conditions = yes
			
			ROOT = {
				is_inaccessible_trigger = no

				custom_tooltip = {
					text = has_not_used_decision_5_years_tooltip
					hidden_tooltip = {
						OR = {
							NOT = { has_character_flag = heal_wounds_cooldown_flag }
							had_character_flag = { flag = heal_wounds_cooldown_flag days = 1825 }
						}
					}
				}
			}
			FROM = {
				show_scope_change = no
				is_inaccessible_trigger = no

				conditional_tooltip = {
					trigger = { ROOT = { trait = severely_injured } }
					is_5_6_magic_class_trigger = yes
					has_3_mana_trigger = yes
				}
				conditional_tooltip = {
					trigger = { ROOT = { NOT = { trait = severely_injured } } }
					has_1_mana_trigger = yes
				}
			}
		}

		effect = {
			ROOT = {
				set_character_flag = heal_wounds_cooldown_flag

				if = {
					limit = { trait = severely_injured }
					tooltip = { remove_trait = severely_injured }
				}
				if = {
					limit = { trait = wounded }
					tooltip = { remove_trait = wounded }
				}
				if = {
					limit = { character = FROM }
					if = { limit = { trait = severely_injured } character_event = { id = RIP.11000 } }
					if = { limit = { trait = wounded } character_event = { id = 6081 } }
				}
				else = {
					letter_event = { id = WCCLS.805 }
				}
			}
			FROM = {
				show_scope_change = no
				tooltip = {
					if = {
						limit = { ROOT = { trait = severely_injured } }
						remove_3_mana_effect = yes
					}
					else = {
						remove_1_mana_effect = yes
					}
				}
			}
		}

		revoke_allowed = { always = no }

		ai_will_do = {
			factor = 0.01
			modifier = {
				factor = 100
				character = FROM
			}
			modifier = {
				factor = 10
				reverse_opinion = {
					who = FROM
					value = 30
				}
			}
			modifier = {
				factor = 0
				NOR = {
					is_close_relative = FROM
					is_friend = FROM
					is_lover = FROM
					FROM = {
						has_minor_title = title_court_physician
						de_facto_liege = ROOT
					}
				}
			}
		}
	}
	# Gives 2 year health bonus or health penalty if ROOT is undead, demon or void creature
	light_mark_dec = {
		filter = realm_including_me
		ai_target_filter = court_including_me
		ai_check_interval = 24

		only_playable = yes

		from_potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			OR = {
				is_paladin_class_trigger = yes
				is_priest_class_trigger = yes
			}
			NOT = { trait = subclass_moon_priest }
		}

		potential = {
			is_untouchable_trigger = no

			is_within_diplo_range = FROM
			NOT = { has_character_modifier = light_mark_good }
			NOT = { has_character_modifier = light_mark_bad }

			OR = {
				character = FROM
				has_invader_title_trigger = no
			}

			# FROM can't hurt itself
			NOT = {
				FROM = {
					character = ROOT
					is_dark_being_trigger = yes
				}
			}
		}

		allow = {
			show_only_failed_conditions = yes
			
			is_inaccessible_trigger = no

			is_humanoid_trigger = yes

			custom_tooltip = {
				text = has_not_used_decision_3_years_tooltip
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = light_mark_cooldown_flag }
						had_character_flag = { flag = light_mark_cooldown_flag years = 3 }
					}
				}
			}
			FROM = {
				show_scope_change = no
				is_inaccessible_trigger = no

				is_3_4_magic_class_trigger = yes
				has_2_mana_trigger = yes
			}
		}

		effect = {
			ROOT = {
				show_scope_change = no
				set_character_flag = light_mark_cooldown_flag

				if = {
					limit = { is_dark_being_trigger = yes }
					tooltip = { add_character_modifier = { name = light_mark_bad years = 2 } }
					if = {
						limit = { NOT = { character = FROM } }
						opinion = { modifier = opinion_traitor who = FROM }
					}
					hidden_effect = { character_event = { id = WCCLS.305 } }
				}
				else = {
					tooltip = { add_character_modifier = { name = light_mark_good years = 2 } }
					if = {
						limit = { NOT = { character = FROM } }
						opinion = { modifier = opinion_grateful who = FROM year = 5 }
					}
					hidden_effect = { character_event = { id = WCCLS.305 } }
				}
			}
			FROM = {
				show_scope_change = no
				remove_2_mana_effect = yes
			}
		}

		revoke_allowed = { always = no }

		ai_will_do = {
			factor = 0.1
			modifier = {
				factor = 10
				character = FROM
			}
			modifier = {
				factor = 4
				FROM = { is_benevolent_trigger = yes }
			}
			modifier = {
				factor = 2
				reverse_opinion = {
					who = FROM
					value = 30
				}
			}
			modifier = {
				factor = 0
				NOR = {
					is_close_relative = FROM
					is_friend = FROM
					is_lover = FROM
					FROM = {
						has_minor_title = title_court_physician
						de_facto_liege = ROOT
					}
				}
			}
			# AI can't hurt anyone
			modifier = {
				factor = 0
				is_dark_being_trigger = no
			}
		}
	}

	### Priest ###
	touch_of_elune_dec = {
		filter = realm_including_me
		ai_target_filter = court_including_me
		ai_check_interval = 24

		only_playable = yes

		from_potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			is_priest_class_trigger = yes
			trait = subclass_moon_priest
		}

		potential = {
			is_untouchable_trigger = no

			is_within_diplo_range = FROM
			NOT = { has_character_modifier = touch_of_elune }
		}

		allow = {
			show_only_failed_conditions = yes
			
			is_inaccessible_trigger = no

			custom_tooltip = {
				text = has_not_used_decision_3_years_tooltip
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = touch_of_elune_cooldown_flag }
						had_character_flag = { flag = touch_of_elune_cooldown_flag years = 3 }
					}
				}
			}

			is_dark_being_trigger = no
			is_humanoid_trigger = yes

			FROM = {
				is_inaccessible_trigger = no

				is_3_4_magic_class_trigger = yes
				has_2_mana_trigger = yes
			}
		}

		effect = {
			ROOT = {
				show_scope_change = no
				set_character_flag = touch_of_elune_cooldown_flag
				if = {
					limit = { NOT = { character = FROM } }
					opinion = { modifier = opinion_grateful who = FROM year = 5 }
				}
				add_character_modifier = { name = touch_of_elune years = 2 }
			}
			FROM = {
				show_scope_change = no
				remove_2_mana_effect = yes
			}
		}

		revoke_allowed = { always = no }

		ai_will_do = {
			factor = 0.1
			modifier = {
				factor = 10
				character = FROM
			}
			modifier = {
				factor = 4
				FROM = { is_benevolent_trigger = yes }
			}
			modifier = {
				factor = 2
				reverse_opinion = {
					who = FROM
					value = 30
				}
			}
		}
	}

	### Rogue ###
	# Gives a chance to make ROOT incapable for a while
	poison_with_gas = {
		ai_target_filter = rivals
		ai_check_interval = 24

		only_playable = yes

		from_potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			is_rogue_class_trigger = yes
		}

		potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no

			NOT = { character = FROM }
			from_in_range_to_hurt_this_trigger = yes
			NOT = { has_character_flag = poison_with_gas_ongoing_flag }

			has_invader_title_trigger = no

			# AI preferences
			# ai_from_prefer_to_hurt_this_trigger = yes	# No need because check only rivals
		}

		allow = {
			show_only_failed_conditions = yes
			
			prisoner = no
			is_inaccessible_trigger = no

			NOT = { has_character_modifier = has_been_poisoned_by_gas }
			custom_tooltip = {
				text = has_not_been_target_3_years_tooltip
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = poison_with_gas_cooldown_flag }
						had_character_flag = { flag = poison_with_gas_cooldown_flag years = 3 }
					}
				}
			}

			is_dark_being_trigger = no
			is_humanoid_trigger = yes

			FROM = {
				is_inaccessible_trigger = no

				conditional_tooltip = {
					trigger = {
						ROOT = {
							OR = {
								tier = COUNT
								any_close_relative = { tier = COUNT }
							}
						}
					}
					intrigue = 8
					scaled_wealth = { value = 0.5 min = 100 }
				}
				conditional_tooltip = {
					trigger = {
						ROOT = {
							OR = {
								tier = DUKE
								any_close_relative = { tier = DUKE }
							}
						}
					}
					intrigue = 12
					scaled_wealth = { value = 1.0 min = 200 }
				}
				conditional_tooltip = {
					trigger = {
						ROOT = {
							OR = {
								tier = KING
								any_close_relative = { tier = KING }
							}
						}
					}
					intrigue = 15
					scaled_wealth = { value = 1.5 min = 300 }
				}
				conditional_tooltip = {
					trigger = {
						ROOT = {
							OR = {
								tier = EMPEROR
								any_close_relative = { tier = EMPEROR }
							}
						}
					}
					intrigue = 18
					scaled_wealth = { value = 2.0 min = 400 }
				}
				conditional_tooltip = {
					trigger = {
						ROOT = {
							NOT = { higher_tier_than = BARON }
							NOT = { any_close_relative = { higher_tier_than = BARON } }
						}
					}
					scaled_wealth = { value = 0.25 min = 50 }
				}
			}
		}

		effect = {
			set_character_flag = poison_with_gas_ongoing_flag
			set_character_flag = poison_with_gas_cooldown_flag

			FROM = {
				show_scope_change = no
				if = {
					limit = {
						ROOT = {
							OR = {
								tier = EMPEROR
								any_close_relative = { tier = EMPEROR }
							}
						}
					}
					scaled_wealth = { value = -2.0 min = -400 }
				}
				else = {
					if = {
						limit = {
							ROOT = {
								OR = {
									tier = KING
									any_close_relative = { tier = KING }
								}
							}
						}
						scaled_wealth = { value = -1.5 min = -300 }
					}
					else = {
						if = {
							limit = {
								ROOT = {
									OR = {
										tier = DUKE
										any_close_relative = { tier = DUKE }
									}
								}
							}
							scaled_wealth = { value = -1.0 min = -200 }
						}
						else = {
							if = {
								limit = {
									ROOT = {
										OR = {
											tier = COUNT
											any_close_relative = { tier = COUNT }
										}
									}
								}
								scaled_wealth = { value = -0.5 min = -100 }
							}
							else = {
								scaled_wealth = { value = -0.25 min = -50 }
							}
						}
					}
				}
			}
			hidden_effect = {
				random_list = {
					5 = {
						set_character_flag = deadly_gas_attack_flag
						character_event = { id = WCCLS.505 days = 3 }
					}
					5 = {
						set_character_flag = very_successful_gas_attack_flag
						character_event = { id = WCCLS.505 days = 3 }
						modifier = {
							factor = 0
							trait = blinded
						}
					}
					60 = {
						set_character_flag = successful_gas_attack_flag
						character_event = { id = WCCLS.505 days = 3 }
					}
					30 = {
						set_character_flag = failed_gas_attack_flag
						FROM = { long_character_event = { id = WCCLS.506 days = 3 } }
						modifier = {
							factor = 1.29
							higher_tier_than = KING
						}
						modifier = {
							factor = 1.29
							higher_tier_than = DUKE
						}
						modifier = {
							factor = 1.29
							higher_tier_than = COUNT
						}
						modifier = {
							factor = 1.29
							is_ruler = yes
						}
						modifier = {
							factor = 1.29
							health = 10
						}
						modifier = {
							factor = 1.29
							health = 8
						}
						modifier = {
							factor = 1.29
							health = 6
						}
						modifier = {
							factor = 1.46
							FROM = { NOT = { intrigue = 8 } }
						}
						modifier = {
							factor = 1.46
							FROM = { NOT = { intrigue = 4 } }
						}
						modifier = {
							factor = 0.8
							FROM = { intrigue = 18 }
						}
						modifier = {
							factor = 0.8
							FROM = { intrigue = 15 }
						}
						modifier = {
							factor = 0.8
							FROM = { intrigue = 12 }
						}
						modifier = {
							factor = 0.8
							NOT = { health = 4 }
						}
						modifier = {
							factor = 0.8
							NOT = { health = 2 }
						}
					}
				}
			}
		}

		revoke_allowed = { always = no }

		ai_will_do = {
			factor = 0.1
			modifier = {
				FROM = { is_benevolent_trigger = yes }
				factor = 0.1
			}
			modifier = {
				FROM = { is_evil_trigger = yes }
				factor = 4
			}
			modifier = {
				FROM = { trait = ambitious }
				factor = 2
			}
		}
	}

	### Warlock ###
	# Gives soul_shard that can be used alter
	prisoner_drain_soul = {
		filter = court
		ai_target_filter = court
		ai_check_interval = 12

		only_playable = yes

		from_potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			OR = {
				is_warlock_class_trigger = yes
				society_member_of = shadow_council
			}
		}

		potential = {
			is_untouchable_trigger = no

			prisoner = yes

			host = { character = FROM }
		}

		allow = {
			show_only_failed_conditions = yes
			
			is_dark_being_trigger = no
			is_humanoid_trigger = yes

			NOT = { diplomatic_immunity = yes }
			FROM = {
				is_inaccessible_trigger = no
			}
		}

		effect = {
			death = { death_reason = death_missing }
			hidden_effect = { character_event = { id = MNM.7506 } }
			FROM = {
				add_2_fel_corruption_effect = yes

				increase_visibility_minor_effect = yes
				minor_soul_corruption_effect = yes
				hidden_effect = { murder_bloodline_check_effect = yes }
				add_artifact = soul_shard
			}
			from_society_sacrifice_root_effect = yes
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.01
				NOR = {
					trait = dwarf
					is_priest = yes
					is_ascetic_trigger = yes
					is_virgin_trigger = yes
					is_landed = yes
				}
			}
		}
	}
	# Uses soul_shard to restore mana
	restore_mana = {
		filter = self
		ai_target_filter = none
		ai_check_interval = 12

		ai = no
		only_playable = yes

		potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			is_warlock_class_trigger = yes
			OR = {
				AND = {
					is_1_2_magic_class_trigger = yes
					has_character_modifier = mana_0
				}
				AND = {
					is_3_4_magic_class_trigger = yes
					has_character_modifier = mana_1
				}
				AND = {
					is_5_6_magic_class_trigger = yes
					has_character_modifier = mana_2
				}
				AND = {
					is_7_8_magic_class_trigger = yes
					has_character_modifier = mana_3
				}
				AND = {
					is_9_10_magic_class_trigger = yes
					has_character_modifier = mana_4
				}
			}
		}

		allow = {
			show_only_failed_conditions = yes
			
			is_inaccessible_trigger = no

			has_artifact = soul_shard
			custom_tooltip = {
				text = has_not_used_decision_5_years_tooltip
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = restore_mana_cooldown_flag }
						had_character_flag = { flag = restore_mana_cooldown_flag days = 1825 }
					}
				}
			}
		}

		effect = {
			add_10_fel_corruption_effect = yes

			destroy_artifact = soul_shard
			custom_tooltip = {
				text = restore_mana_effect_tooltip
				hidden_effect = {
					set_character_flag = completely_restored_mana_flag
					character_event = { id = WCCLS.5 }
				}
			}
		}

		ai_will_do = {
			factor = 0.25
		}
	}
	# Uses soul_shard to increase fel corruption
	use_soul_shard = {
		filter = self
		ai_target_filter = none
		ai_check_interval = 12

		ai = no
		only_playable = yes

		potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			has_dlc = "Mystics"
			is_warlock_class_trigger = yes
			NOR = {
				trait = being_demon
				check_variable = { which = fel_corruption value = 100 }
			}
		}

		allow = {
			show_only_failed_conditions = yes
			
			is_inaccessible_trigger = no

			has_artifact = soul_shard
			custom_tooltip = {
				text = has_not_used_decision_1_year_tooltip
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = use_soul_shard_cooldown_flag }
						had_character_flag = { flag = use_soul_shard_cooldown_flag days = 365 }
					}
				}
			}
		}

		effect = {
			set_character_flag = use_soul_shard_cooldown_flag

			add_15_fel_corruption_effect = yes

			destroy_artifact = soul_shard
		}

		ai_will_do = {
			factor = 0.25
		}
	}
	# Adds demon modifier using soul_shard
	summon_demon = {
		filter = self
		ai_target_filter = self
		ai_check_interval = 48

		only_playable = yes

		potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			NOT = { has_character_flag = summon_demon_ongoing_flag }

			is_warlock_class_trigger = yes
		}

		allow = {
			show_only_failed_conditions = yes
			
			is_inaccessible_trigger = no

			custom_tooltip = {
				text = has_not_used_decision_5_years_tooltip
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = summon_demon_cooldown_flag }
						had_character_flag = { flag = summon_demon_cooldown_flag years = 5 }
					}
				}
			}

			is_3_4_magic_class_trigger = yes
			has_2_mana_trigger = yes
			OR = {
				has_artifact = soul_shard
				hidden_tooltip = { NOT = { has_dlc = "Mystics" } }
			}
		}

		effect = {
			set_character_flag = summon_demon_ongoing_flag
			set_character_flag = summon_demon_cooldown_flag

			add_10_fel_corruption_effect = yes

			destroy_artifact = soul_shard
			trigger_switch = {
				on_trigger = has_character_modifier
				pet_imp = { remove_character_modifier = pet_imp }
				pet_succubus = {
					remove_character_modifier = pet_succubus
					if = {
						limit = { any_friend = { trait = creature_sayaadi } }
						random_friend = {
							limit = { trait = creature_sayaadi }
							death = { death_reason = death_missing }
						}
					}
				}
				pet_felhunter = { remove_character_modifier = pet_felhunter }
				pet_felguard = { remove_character_modifier = pet_felguard }
			}
			character_event = { id = WCCLS.610 }
			remove_2_mana_effect = yes
		}

		revoke_allowed = { always = no }

		ai_will_do = {
			factor = 0.25
		}
	}
	# Gives chance to make ROOT opinion_loyal_servant
	control_mind = {
		ai_target_filter = realm
		ai_check_interval = 24

		only_playable = yes

		from_potential = {
			is_untouchable_trigger = no

			is_adult = yes
			OR = {
				is_incapable = no
				trait = lich_king
			}
			prisoner = no

			OR = {
				# trait = creature_nathrezim
				# trait = creature_cthraxxi
				# trait = creature_qiraji
				# trait = vampire
				is_warlock_class_trigger = yes
				is_death_knight_class_trigger = yes
				is_necromancer_class_trigger = yes
				is_shadow_priest_class_trigger = yes
				# trait = subclass_dark_shaman
				trait = lich_king

				AND = {
					OR = {
						society_member_of = shadow_council
						society_member_of = twilights_hammer_cult
					}
					society_rank > 2
				}
			}
		}

		potential = {
			is_untouchable_trigger = no

			ai = yes
			is_adult = yes

			NOT = { character = FROM }
			from_in_range_to_hurt_this_trigger = yes
			NOT = { has_character_flag = mind_control_attempt_flag }

		}

		allow = {
			show_only_failed_conditions = yes
			
			is_inaccessible_trigger = no

			OR = {
				host = { character = FROM }
				liege = { character = FROM }
				trigger_if = {
					limit = {
						FROM = {
							is_society_grandmaster = yes
							society_member_of = shadow_council
						}
					}
					same_realm = FROM
				}
			}

			OR = {
				custom_tooltip = {
					text = mind_control_already_done
					hidden_tooltip = {
						NOR = {
							has_character_flag = mind_control_attempt_flag
							has_opinion_modifier = { who = FROM modifier = opinion_loyal_servant }
							trait = possessed
							trait = lunatic
						}
					}
				}
				AND = {
					is_quest_target_of = FROM
					FROM = { has_quest = quest_control_mind }
				}
			}

			NOT = { trait = being_demon }
			NOT = { trait = being_void }
			is_humanoid_trigger = yes

			has_weak_character_trigger = yes
			FROM = {
				is_inaccessible_trigger = no

				OR = {
					trigger_if = {
						limit = {
							OR = {
								is_warlock_class_trigger = yes
								is_death_knight_class_trigger = yes
								is_necromancer_class_trigger = yes
								is_shadow_priest_class_trigger = yes
							}
						}
						AND = {
							is_5_6_magic_class_trigger = yes
							has_2_mana_trigger = yes
						}
					}
					trigger_if = {
						limit = {
							OR = {
								society_member_of = shadow_council
								society_member_of = twilights_hammer_cult
							}
							society_rank > 2
						}
						OR = {
							has_society_currency_medium_trigger = yes
							AND = {
								ROOT = { is_quest_target_of = FROM }
								has_quest = quest_control_mind
							}
						}
					}
					trigger_if = {
						limit = { trait = lich_king }
						piety = 100
					}
				}
			}
		}

		effect = {
			set_character_flag = mind_control_attempt_flag
			FROM = {
				hidden_effect = { character_event = { id = WCCLS.615 days = 3 } }

				if = {
					limit = {
						OR = {
							society_member_of = shadow_council
							society_member_of = twilights_hammer_cult
						}
					}
					if = {
						limit = { ROOT = { NOT = { is_quest_target_of = FROM } } }
						increase_visibility_effect = yes
					}
					if = {
						limit = { ROOT = { is_quest_target_of = FROM } }
						increase_visibility_minor_effect = yes
					}
				}
				if = {
					limit = {
						ROOT = { is_quest_target_of = FROM }
						has_quest = quest_control_mind
					}
					# Pay nothing
				}
				else_if = {
					limit = {
						OR = {
							is_warlock_class_trigger = yes
							is_necromancer_class_trigger = yes
							is_death_knight_class_trigger = yes
							is_shadow_priest_class_trigger = yes
						}
						is_5_6_magic_class_trigger = yes
						has_2_mana_trigger = yes
					}
					remove_2_mana_effect = yes
				}
				else_if = {
					limit = {
						OR = {
							society_member_of = shadow_council
							society_member_of = twilights_hammer_cult
						}
						society_rank > 2
						has_society_currency_medium_trigger = yes
					}
					detract_society_currency_medium_effect = yes
				}
				else = {
					piety = -100
				}
				if = {
					limit = {
						OR = {
							is_shadow_priest_class_trigger = yes
							society_member_of = twilights_hammer_cult
						}
						is_susceptible_to_void_corruption_trigger = yes
					}
					add_5_void_corruption_effect = yes
				}
				else_if = {
					limit = {
						OR = {
							is_warlock_class_trigger = yes
							society_member_of = shadow_council
						}
						is_susceptible_to_fel_corruption_trigger = yes
					}
					add_5_fel_corruption_effect = yes
				}
			}
		}

		ai_will_do = {
			factor = 0.25
			modifier = {
				factor = 0.5
				FROM = { is_benevolent_trigger = yes }
			}
			modifier = {
				factor = 0.25
				ROOT = { is_landed = no }
			}
			modifier = {
				factor = 3
				ROOT = { among_most_powerful_vassals = 5 }
			}
		}
	}

	### Shaman ###

	### Druid ###

	### Loa Priest ###
	# Gives stressed or depressed or weak or slow or stutter or lisp to ROOT
	# If FROM fails, gives quick or strong to ROOT or do nothing
	bad_voodoo = {
		ai_target_filter = realm
		ai_check_interval = 24

		only_playable = yes

		from_potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			is_loa_priest_class_trigger = yes
		}

		potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no

			NOT = { character = FROM }
			from_in_range_to_hurt_this_trigger = yes
			NOT = { has_character_flag = bad_voodoo_ongoing_flag }

			# AI preferences
			ai_from_prefer_to_hurt_this_trigger = yes
		}

		allow = {
			show_only_failed_conditions = yes
			
			is_inaccessible_trigger = no

			custom_tooltip = {
				text = has_not_used_decision_3_years_tooltip
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = bad_voodoo_cooldown_flag }
						had_character_flag = { flag = bad_voodoo_cooldown_flag years = 3 }
					}
				}
			}

			is_dark_being_trigger = no
			is_humanoid_trigger = yes
			OR = {
				NOT = { trait = lisp }
				NOT = { trait = slow }
				NOT = { trait = stutter }
				NOT = { trait = weak }
				NOT = { trait = depressed }
				NOT = { trait = stressed }
			}

			FROM = {
				is_inaccessible_trigger = no

				has_1_mana_trigger = yes
			}
		}

		effect = {
			save_event_target_as = target_doll

			set_character_flag = bad_voodoo_ongoing_flag
			set_character_flag = bad_voodoo_cooldown_flag

			hidden_effect = {
				random_list = {
					40 = {	# Success
						random_list = {
							10 = {
								set_character_flag = bad_voodoo_lisp_flag
								modifier = {
									factor = 0
									trait = lisp
								}
							}
							5 = {
								set_character_flag = bad_voodoo_slow_flag
								modifier = {
									factor = 0
									trait = slow
								}
							}
							10 = {
								set_character_flag = bad_voodoo_stutter_flag
								modifier = {
									factor = 0
									trait = stutter
								}
							}
							5 = {
								set_character_flag = bad_voodoo_weak_flag
								modifier = {
									factor = 0
									trait = weak
								}
							}
							20 = {
								set_character_flag = bad_voodoo_depressed_flag
								modifier = {
									factor = 0
									trait = depressed
								}
							}
							50 = {
								set_character_flag = bad_voodoo_stressed_flag
								modifier = {
									factor = 0
									trait = stressed
								}
							}
						}
						modifier = {
							factor = 2.24
							is_9_10_magic_class_trigger = yes
						}
						modifier = {
							factor = 2.24
							is_7_8_magic_class_trigger = yes
						}
						modifier = {
							factor = 2.24
							is_5_6_magic_class_trigger = yes
						}
						modifier = {
							factor = 2.24
							is_3_4_magic_class_trigger = yes
						}
					}
					60 = {	# Fail
						random_list = {
							80 = { set_character_flag = bad_voodoo_nothing_flag }
							10 = {
								set_character_flag = bad_voodoo_quick_flag
								modifier = {
									factor = 0
									trait = quick
								}
							}
							10 = {
								set_character_flag = bad_voodoo_strong_flag
								modifier = {
									factor = 0
									trait = strong
								}
							}
						}
					}
				}
			}
			FROM = {
				remove_1_mana_effect = yes

				hidden_effect = {
					character_event = { id = WCCLS.905 days = 3 }
				}
			}
		}

		revoke_allowed = { always = no }

		ai_will_do = {
			factor = 0.1
			modifier = {
				FROM = { is_benevolent_trigger = yes }
				factor = 0.1
			}
			modifier = {
				FROM = { is_evil_trigger = yes }
				factor = 4
			}
			modifier = {
				FROM = { trait = ambitious }
				factor = 2
			}
		}
	}

	### Death Knight

	### Necromancer ###
	prisoner_disembowel = {
		filter = court
		ai_target_filter = court
		ai_check_interval = 12

		only_playable = yes

		from_potential = {
			is_untouchable_trigger = no

			is_adult = yes
			OR = {
				is_incapable = no
				trait = lich_king
			}
			prisoner = no

			OR = {
				society_member_of = cult_of_the_damned
				is_necromancer_class_trigger = yes
			}
		}

		potential = {
			is_untouchable_trigger = no

			is_adult = yes
			prisoner = yes

			host = { character = FROM }
		}

		allow = {
			show_only_failed_conditions = yes
			
			is_dark_being_trigger = no
			is_humanoid_trigger = yes

			NOT = { diplomatic_immunity = yes }
			FROM = {
				is_inaccessible_trigger = no
			}
		}

		effect = {
			hidden_effect = { long_character_event = { id = MNM.7506 } }
			FROM = {
				show_scope_change = no
				increase_visibility_minor_effect = yes
				minor_soul_corruption_effect = yes
				add_prev_useful_flesh = yes
				hidden_effect = { character_event = { id = WCCLS.1105 } }
			}
			death = { death_reason = death_missing }
			# Small Humanoid
			if = {
				limit = { is_small_humanoid_trigger = yes }
				FROM = {
					show_scope_change = no
					if = {
						limit = { has_quest = quest_disembowel_small_humanoid }
						clr_quest = quest_disembowel_small_humanoid
						add_society_currency_minor_effect = yes
						break = yes
					}
					if = {
						limit = { society_member_of = cult_of_the_damned }
						add_society_currency_trivial_effect = yes
					}
				}
				break = yes
			}
			# Medium Humanoid
			if = {
				limit = { is_medium_humanoid_trigger = yes }
				FROM = {
					show_scope_change = no
					if = {
						limit = { has_quest = quest_disembowel_medium_humanoid }
						clr_quest = quest_disembowel_medium_humanoid
						add_society_currency_minor_effect = yes
						break = yes
					}
					if = {
						limit = { society_member_of = cult_of_the_damned }
						add_society_currency_trivial_effect = yes
					}
				}
				break = yes
			}
			# Large Humanoid
			if = {
				limit = { is_large_humanoid_trigger = yes }
				FROM = {
					show_scope_change = no
					if = {
						limit = { has_quest = quest_disembowel_large_humanoid }
						clr_quest = quest_disembowel_large_humanoid
						add_society_currency_medium_effect = yes
						break = yes
					}
					if = {
						limit = { society_member_of = cult_of_the_damned }
						add_society_currency_minor_effect = yes
					}
				}
				break = yes
			}
			FROM = {
				show_scope_change = no
				if = {
					limit = { society_member_of = cult_of_the_damned }
					add_society_currency_trivial_effect = yes
				}
			}
		}

		ai_will_do = {
			factor = 0.25
		}
	}
	prisoner_raise_from_dead = {
		filter = court
		ai_target_filter = court
		ai_check_interval = 12

		only_playable = yes

		from_potential = {
			is_untouchable_trigger = no

			is_adult = yes
			OR = {
				is_incapable = no
				trait = lich_king	# Ner'zhul is incapable
			}

			OR = {
				trait = being_undead
				is_death_knight_class_trigger = yes
				is_necromancer_class_trigger = yes
				AND = {
					society_member_of = cult_of_the_damned
					society_rank > 1
				}
			}
		}

		potential = {
			is_untouchable_trigger = no

			is_adult = yes
			prisoner = yes

			NOT = { character = FROM }
			NOT = { has_character_flag = being_raised_flag }

			NOT = { trait = being_undead }
			can_be_undead_trigger = yes

			host = { character = FROM }
		}

		allow = {
			show_only_failed_conditions = yes
			
			FROM = {
				show_scope_change = no
				is_inaccessible_trigger = no

				OR = {
					trigger_if = {
						limit = {
							OR = {
								is_death_knight_class_trigger = yes
								is_necromancer_class_trigger = yes
							}
						}
						has_1_mana_trigger = yes
					}
					trigger_if = {
						limit = {
							society_member_of = cult_of_the_damned
							society_rank > 1
						}
						has_society_currency_minor_trigger = yes
					}
					AND = {
						wealth = 50
						prestige = 100
						piety = 50
					}
				}
			}
		}

		effect = {
			hidden_effect = {
				FROM = { save_event_target_as = target_necromancer }
				save_event_target_as = target_undead

				set_character_flag = being_raised_flag
			}

			FROM = {
				show_scope_change = no
				hidden_effect = { character_event = { id = WCUND.300 } }

				increase_visibility_effect = yes
				minor_soul_corruption_effect = yes
				if = {
					limit = {
						has_quest = quest_turn_into_undead
						quest_target = { character = ROOT }
					}
					clr_quest = quest_turn_into_undead
					add_society_currency_medium_effect = yes
				}
				else_if = {
					limit = {
						OR = {
							is_death_knight_class_trigger = yes
							is_necromancer_class_trigger = yes
						}
						has_1_mana_trigger = yes
					}
					remove_1_mana_effect = yes
				}
				else_if = {
					limit = {
						society_member_of = cult_of_the_damned
						society_rank > 1
						has_society_currency_minor_trigger = yes
					}
					detract_society_currency_minor_effect = yes
				}
				else = {
					wealth = -50
					prestige = -100
					piety = -50
				}
			}
		}

		ai_will_do = {
			factor = 0.25
		}
	}
	# Turns character into abomination
	prisoner_create_monstrous_undead = {
		filter = court
		ai_target_filter = court
		ai_check_interval = 24

		only_playable = yes

		from_potential = {
			is_untouchable_trigger = no

			is_adult = yes
			OR = {
				is_incapable = no
				trait = lich_king	# Ner'zhul is incapable
			}

			NOT = { has_character_flag = ongoing_creation_of_monstrous_undead_flag }

			OR = {
				is_necromancer_class_trigger = yes
				AND = {
					society_member_of = cult_of_the_damned
					society_rank > 2
				}
			}
		}

		potential = {
			is_untouchable_trigger = no

			is_adult = yes
			prisoner = yes

			NOT = { character = FROM }
			NOT = { has_character_flag = being_raised_flag }	# The same flag that uses prisoner_raise_from_dead decision

			can_be_undead_trigger = yes
			NOT = { trait = being_undead }
			NOR = {
				trait = creature_wraith
				trait = creature_banshee
				trait = creature_plague_eruptor
				trait = creature_abomination
				trait = creature_lich
			}
			host = { character = FROM }
		}

		allow = {
			show_only_failed_conditions = yes

			FROM = {
				show_scope_change = no
				is_inaccessible_trigger = no

				OR = {
					trigger_if = {
						limit = { is_necromancer_class_trigger = yes }
						is_5_6_magic_class_trigger = yes
						has_3_mana_trigger = yes
					}
					trigger_if = {
						limit = {
							society_member_of = cult_of_the_damned
							society_rank > 2
						}
						has_society_currency_minor_trigger = yes
					}
				}
				check_variable = { which = useful_flesh value = 12 }
			}
		}

		effect = {
			hidden_effect = {
				set_character_flag = being_raised_flag
				FROM = { set_character_flag = ongoing_creation_of_monstrous_undead_flag }
			}

			save_event_target_as = target_prisoner
			FROM = { save_event_target_as = target_necromancer }

			hidden_effect = { long_character_event = { id = MNM.7506 } }
			FROM = {
				show_scope_change = no
				hidden_effect = { character_event = { id = WCUND.350 } }

				change_variable = { which = useful_flesh value = -12 }
				increase_visibility_effect = yes
				major_soul_corruption_effect = yes
				if = {
					limit = {
						has_quest = quest_turn_into_undead
						quest_target = { character = ROOT }
					}
					clr_quest = quest_turn_into_undead
					add_society_currency_medium_effect = yes
					break = yes
				}
				else_if = {
					limit = {
						is_necromancer_class_trigger = yes
						is_5_6_magic_class_trigger = yes
						has_3_mana_trigger = yes
					}
					remove_3_mana_effect = yes
				}
				else_if = {
					limit = {
						society_member_of = cult_of_the_damned
						society_rank > 2
						has_society_currency_minor_trigger = yes
					}
					detract_society_currency_minor_effect = yes
				}
			}
		}

		ai_will_do = {
			factor = 0.25
		}
	}

	### Shadow Priest ###
	# Adds stressed or depressed or lunatic trait to ROOT
	# If FROM fails gives lunatic trait to FROM or do nothing
	drive_crazy = {
		ai_target_filter = realm
		ai_check_interval = 24

		only_playable = yes

		from_potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			is_shadow_priest_class_trigger = yes
		}

		potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no

			NOT = { character = FROM }
			from_in_range_to_hurt_this_trigger = yes
			NOT = { has_character_flag = drive_crazy_ongoing_flag }

			# AI preferences
			ai_from_prefer_to_hurt_this_trigger = yes
		}

		allow = {
			show_only_failed_conditions = yes
			
			is_inaccessible_trigger = no

			custom_tooltip = {
				text = has_not_used_decision_3_years_tooltip
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = drive_crazy_cooldown_flag }
						had_character_flag = { flag = drive_crazy_cooldown_flag years = 3 }
					}
				}
			}

			NOT = { trait = being_demon }
			NOT = { trait = being_void }
			is_humanoid_trigger = yes
			OR = {
				NOT = { trait = stressed }
				NOT = { trait = depressed }
				NOT = { trait = lunatic }
			}
			FROM = {
				show_scope_change = no

				is_inaccessible_trigger = no

				has_1_mana_trigger = yes
			}
		}

		effect = {
			save_event_target_as = target_crazy

			set_character_flag = drive_crazy_ongoing_flag
			set_character_flag = drive_crazy_cooldown_flag

			hidden_effect = {
				random_list = {
					40 = {	# Success
						random_list = {
							20 = {
								set_character_flag = drive_crazy_lunatic_flag
								modifier = {
									factor = 2.66
									is_9_10_magic_class_trigger = yes
								}
								modifier = {
									factor = 2.66
									is_7_8_magic_class_trigger = yes
								}
								modifier = {
									factor = 2.66
									is_5_6_magic_class_trigger = yes
								}
								modifier = {
									factor = 2.66
									is_3_4_magic_class_trigger = yes
								}
								modifier = {
									factor = 0
									trait = lunatic
								}
							}
							30 = {
								set_character_flag = drive_crazy_depressed_flag
								modifier = {
									factor = 0
									trait = depressed
								}
							}
							50 = {
								set_character_flag = drive_crazy_stressed_flag
								modifier = {
									factor = 0
									trait = stressed
								}
							}
						}
						modifier = {
							factor = 2.24
							is_9_10_magic_class_trigger = yes
						}
						modifier = {
							factor = 2.24
							is_7_8_magic_class_trigger = yes
						}
						modifier = {
							factor = 2.24
							is_5_6_magic_class_trigger = yes
						}
						modifier = {
							factor = 2.24
							is_3_4_magic_class_trigger = yes
						}
					}
					60 = {	# Fail
						random_list = {
							80 = { set_character_flag = drive_crazy_fail_flag }
							20 = {
								set_character_flag = drive_crazy_epic_fail_flag
								modifier = {
									factor = 0
									FROM = { trait = lunatic }
								}
							}
						}
					}
				}
			}
			FROM = {
				remove_1_mana_effect = yes
				
				add_5_void_corruption_effect = yes

				hidden_effect = {
					character_event = { id = WCCLS.1205 days = 3 }
				}
			}
		}

		revoke_allowed = { always = no }

		ai_will_do = {
			factor = 0.1
			modifier = {
				FROM = { is_benevolent_trigger = yes }
				factor = 0.1
			}
			modifier = {
				FROM = { is_evil_trigger = yes }
				factor = 4
			}
			modifier = {
				FROM = { trait = ambitious }
				factor = 2
			}
		}
	}
	# Creates creature_nraqi
	# If FROM fails, kills FROM
	summon_void_creature = {
		filter = self
		ai_target_filter = self
		ai_check_interval = 48

		only_playable = yes

		potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			NOT = { has_character_flag = summon_void_creature_ongoing_flag }

			is_shadow_priest_class_trigger = yes
		}

		allow = {
			show_only_failed_conditions = yes
			
			is_inaccessible_trigger = no

			custom_tooltip = {
				text = has_not_used_decision_5_years_tooltip
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = summon_void_creature_cooldown_flag }
						had_character_flag = { flag = summon_void_creature_cooldown_flag years = 5 }
					}
				}
			}

			is_5_6_magic_class_trigger = yes
			has_3_mana_trigger = yes
		}

		effect = {
			set_character_flag = summon_void_creature_ongoing_flag
			set_character_flag = summon_void_creature_cooldown_flag
			
			remove_3_mana_effect = yes
			
			add_15_void_corruption_effect = yes

			hidden_effect = {
				random_list = {
					50 = {
						set_character_flag = summon_void_creature_success_flag
						modifier = {
							factor = 4.47
							is_9_10_magic_class_trigger = yes
						}
						modifier = {
							factor = 4.47
							is_7_8_magic_class_trigger = yes
						}
					}
					25 = {
						set_character_flag = summon_void_creature_secret_flag
						modifier = {
							factor = 0
							true_religion = old_gods_worship
						}
					}
					25 = {
						set_character_flag = summon_void_creature_fail_flag
						modifier = {
							factor = 0
							true_religion = old_gods_worship
						}
					}
				}
				character_event = { id = WCCLS.1215 days = 3 }
			}
		}

		revoke_allowed = { always = no }

		ai_will_do = {
			factor = 0.25
		}
	}
}
settlement_decisions = {
	### Shaman ###
	earths_blessing = {
		filter = realm_owned
		ai_target_filter = owned
		ai_check_interval = 24

		only_playable = yes

		from_potential = {
			is_untouchable_trigger = no

			is_adult = yes
			is_incapable = no
			prisoner = no

			OR = {
				is_shaman_class_trigger = yes
				is_druid_class_trigger = yes
			}
		}

		potential = {
			location = { NOT = { has_province_modifier = druid_blessing } }

			is_capital = yes
		}

		allow = {
			show_only_failed_conditions = yes
			
			FROM = {
				show_scope_change = no
				is_inaccessible_trigger = no

				is_3_4_magic_class_trigger = yes
				has_2_mana_trigger = yes
			}
		}

		effect = {
			location = {
				save_event_target_as = target_province
				add_province_modifier = { name = druid_blessing duration = 1825 }
			}

			holder_scope = {
				character_event = { id = WCCLS.810 }
			}

			FROM = {
				remove_2_mana_effect = yes
			}
		}

		revoke_allowed = {
			always = no
		}

		ai_will_do = {
			factor = 0.25
		}
	}
}